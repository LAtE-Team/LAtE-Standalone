##############################
# Repartee (Reformation)     #
# Events                     #
# Written by Technecian 	 #
##############################

namespace = repartee
namespace = repartee_notifications

#0-9 Discovery of the old world, Repartee begins

#Debugging event for values
country_event = {
	id = repartee.0
	title = repartee.0.t
	desc = repartee.0.d

	is_triggered_only = yes

	immediate = {
		random_province = {
			limit = {
				owner = {
					religion = catholic
				}
				has_port = yes
			}
			save_event_target_as = repartee_debug_target
		}
	}

	option = {
		name = repartee.0.o
		goto = repartee_debug_target
	}
}

#The Old World is Discovered, the Repartee Begins
country_event = {
	id = repartee.1
	title = repartee.1.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = repartee.1.catholic.d
	}
	desc = {
		trigger = {
			OR = {
				religion = ursuline
				religion = anglican
			}
		}
		desc = repartee.1.canadian.d
	}
	desc = {
		trigger = {
			religion = protestant
		}
		desc = repartee.1.protestant.d
	}
	desc = {
		trigger = {
			religion_group = oldworld
		}
		desc = repartee.1.oldworld.d
	}
	desc = {
		trigger = {
			OR = {
				religion_group = afro_syncretic
				religion_group = cult_of_saints
			}
		}
		desc = repartee.1.latin.d
	}
	picture = RELIGION_eventPicture

	trigger = {
		LAtE_repartee_contender_trigger = yes
		any_province = {
			has_discovered = ROOT
			LAtE_in_old_world_trigger = yes
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 4
	}

	immediate = {
		set_global_flag = repartee_begins_flag
		hidden_effect = {
			REB = {
				set_variable = {
					which = catholicReparteeVariable
					value = 0
				}
				set_variable = {
					which = canadianReparteeVariable
					value = 0
				}
				set_variable = {
					which = protestantReparteeVariable
					value = 0
				}
				set_variable = {
					which = oldworldReparteeVariable
					value = 0
				}
				set_variable = {
					which = latinReparteeVariable
					value = 0
				}
			}			
		}
	}

	option = {
		name = repartee.1.o
		repartee_increase_effect = yes
	}

	after = {
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = yes
			}
			country_event = {
				id = repartee_notifications.11
				days = 60 
			}
		}
		every_country = {
			limit = {
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = no
			}
			country_event = {
				id = repartee_notifications.12
				days = 60 
			}
		}
	}
}

#Repartee begins announcement - Same religion
country_event = {
	id = repartee_notifications.11
	title = repartee_notifications.11.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = repartee_notifications.11.catholic.d
	}
	desc = {
		trigger = {
			OR = {
				religion = ursuline
				religion = anglican
			}
		}
		desc = repartee_notifications.11.canadian.d
	}
	desc = {
		trigger = {
			religion = protestant
		}
		desc = repartee_notifications.11.protestant.d
	}
	desc = {
		trigger = {
			religion_group = oldworld
		}
		desc = repartee_notifications.11.oldworld.d
	}
	desc = {
		trigger = {
			OR = {
				religion_group = afro_syncretic
				religion_group = cult_of_saints
			}
		}
		desc = repartee_notifications.11.latin.d
	}
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.11.o
	}
}

#Repartee begins announcement - Different religion
country_event = {
	id = repartee_notifications.12
	title = repartee_notifications.12.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = repartee_notifications.12.catholic.d
	}
	desc = {
		trigger = {
			OR = {
				religion = ursuline
				religion = anglican
			}
		}
		desc = repartee_notifications.12.canadian.d
	}
	desc = {
		trigger = {
			religion = protestant
		}
		desc = repartee_notifications.12.protestant.d
	}
	desc = {
		trigger = {
			religion_group = oldworld
		}
		desc = repartee_notifications.12.oldworld.d
	}
	desc = {
		trigger = {
			OR = {
				religion_group = afro_syncretic
				religion_group = cult_of_saints
			}
		}
		desc = repartee_notifications.12.latin.d
	}
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.12.o
	}
}

# The Discovery of Rome
country_event = {
	id = repartee.2
	title = repartee.2.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = repartee.2.catholic.d
	}
	desc = {
		trigger = {
			OR = {
				religion = ursuline
				religion = anglican
			}
		}
		desc = repartee.2.canadian.d
	}
	desc = {
		trigger = {
			religion = protestant
		}
		desc = repartee.2.protestant.d
	}
	desc = {
		trigger = {
			religion_group = oldworld
		}
		desc = repartee.2.oldworld.d
	}
	desc = {
		trigger = {
			OR = {
				religion_group = afro_syncretic
				religion_group = cult_of_saints
			}
		}
		desc = repartee.2.latin.d
	}
	picture = RELIGION_eventPicture
	fire_only_once = yes

	trigger = {
		has_global_flag = repartee_begins_flag
		LAtE_repartee_contender_trigger = yes
		has_discovered = 118 #Rome
	}

	mean_time_to_happen = {
		months = 3
		modifier = {
			factor = 0.5
			religion = catholic
		}
	}

	immediate = {
		set_global_flag = repartee_rome_discovered_flag
	}

	option = {
		name = repartee.2.o
		repartee_increase_effect = yes
	}

	after = {
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = yes
			}
			country_event = {
				id = repartee_notifications.22
				days = 60 
			}
		}
		every_country = {
			limit = {
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = no
			}
			country_event = {
				id = repartee_notifications.23
				days = 60 
			}
		}
	}
}

# Rome discovered announcement - Same religion
country_event = {
	id = repartee_notifications.22
	title = repartee_notifications.22.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = repartee_notifications.22.catholic.d
	}
	desc = {
		trigger = {
			OR = {
				religion = ursuline
				religion = anglican
			}
		}
		desc = repartee_notifications.22.canadian.d
	}
	desc = {
		trigger = {
			religion = protestant
		}
		desc = repartee_notifications.22.protestant.d
	}
	desc = {
		trigger = {
			religion_group = oldworld
		}
		desc = repartee_notifications.22.oldworld.d
	}
	desc = {
		trigger = {
			OR = {
				religion_group = afro_syncretic
				religion_group = cult_of_saints
			}
		}
		desc = repartee_notifications.22.latin.d
	}
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.22.o
	}
}

# Rome discovered announcement - Different religion
country_event = {
	id = repartee_notifications.23
	title = repartee_notifications.23.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = repartee_notifications.23.catholic.d
	}
	desc = {
		trigger = {
			OR = {
				religion = ursuline
				religion = anglican
			}
		}
		desc = repartee_notifications.23.canadian.d
	}
	desc = {
		trigger = {
			religion = protestant
		}
		desc = repartee_notifications.23.protestant.d
	}
	desc = {
		trigger = {
			religion_group = oldworld
		}
		desc = repartee_notifications.23.oldworld.d
	}
	desc = {
		trigger = {
			OR = {
				religion_group = afro_syncretic
				religion_group = cult_of_saints
			}
		}
		desc = repartee_notifications.23.latin.d
	}
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.23.o
	}
}

# The Discovery of Jerusalem
country_event = {
	id = repartee.3
	title = repartee.3.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = repartee.3.catholic.d
	}
	desc = {
		trigger = {
			OR = {
				religion = ursuline
				religion = anglican
			}
		}
		desc = repartee.3.canadian.d
	}
	desc = {
		trigger = {
			religion = protestant
		}
		desc = repartee.3.protestant.d
	}
	desc = {
		trigger = {
			religion_group = oldworld
		}
		desc = repartee.3.oldworld.d
	}
	desc = {
		trigger = {
			OR = {
				religion_group = afro_syncretic
				religion_group = cult_of_saints
			}
		}
		desc = repartee.3.latin.d
	}
	picture = RELIGION_eventPicture
	fire_only_once = yes

	trigger = {
		has_global_flag = repartee_begins_flag
		LAtE_repartee_contender_trigger = yes
		has_discovered = 379 #Jerusalem
	}

	mean_time_to_happen = {
		months = 3
		modifier = {
			factor = 0.5
			religion = catholic
		}
	}

	immediate = {
		set_global_flag = repartee_jerusalem_discovered_flag
	}

	option = {
		name = repartee.3.o
		repartee_increase_effect = yes
	}

	after = {
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = yes
			}
			country_event = {
				id = repartee_notifications.33
				days = 60 
			}
		}
		every_country = {
			limit = {
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = no
			}
			country_event = {
				id = repartee_notifications.34
				days = 60 
			}
		}
	}
}

# Rome discovered announcement - Same religion
country_event = {
	id = repartee_notifications.33
	title = repartee_notifications.33.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = repartee_notifications.33.catholic.d
	}
	desc = {
		trigger = {
			OR = {
				religion = ursuline
				religion = anglican
			}
		}
		desc = repartee_notifications.33.canadian.d
	}
	desc = {
		trigger = {
			religion = protestant
		}
		desc = repartee_notifications.33.protestant.d
	}
	desc = {
		trigger = {
			religion_group = oldworld
		}
		desc = repartee_notifications.33.oldworld.d
	}
	desc = {
		trigger = {
			OR = {
				religion_group = afro_syncretic
				religion_group = cult_of_saints
			}
		}
		desc = repartee_notifications.33.latin.d
	}
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.33.o
	}
}

# Rome discovered announcement - Different religion
country_event = {
	id = repartee_notifications.34
	title = repartee_notifications.34.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = repartee_notifications.34.catholic.d
	}
	desc = {
		trigger = {
			OR = {
				religion = ursuline
				religion = anglican
			}
		}
		desc = repartee_notifications.34.canadian.d
	}
	desc = {
		trigger = {
			religion = protestant
		}
		desc = repartee_notifications.34.protestant.d
	}
	desc = {
		trigger = {
			religion_group = oldworld
		}
		desc = repartee_notifications.34.oldworld.d
	}
	desc = {
		trigger = {
			OR = {
				religion_group = afro_syncretic
				religion_group = cult_of_saints
			}
		}
		desc = repartee_notifications.34.latin.d
	}
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.34.o
	}
}

# The Discovery of Europeans
country_event = {
	id = repartee.4
	title = repartee.4.t
	desc = repartee.4.d

	picture = RELIGION_eventPicture
	fire_only_once = yes

	trigger = {
		has_global_flag = repartee_begins_flag
		LAtE_repartee_contender_trigger = yes
		any_neighbor_country = {
			AND = {
				# is_tribal = yes #add this later when the europeans are tribal
				capital_scope = {
					LAtE_in_old_world_trigger = yes
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 3
	}

	immediate = {
		set_global_flag = repartee_natives_discovered_flag
	}

	option = {
		name = repartee.4.o
		repartee_increase_effect = yes
	}

	after = {
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = yes
			}
			country_event = {
				id = repartee_notifications.44
				days = 60 
			}
		}
		every_country = {
			limit = {
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = no
			}
			country_event = {
				id = repartee_notifications.45
				days = 60 
			}
		}
	}
}

# Europeans discovered announcement - Same religion
country_event = {
	id = repartee_notifications.44
	title = repartee_notifications.44.t
	desc = repartee_notifications.44.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.44.o
	}
}

# Europeans discovered announcement - Different religion
country_event = {
	id = repartee_notifications.45
	title = repartee_notifications.45.t
	desc = repartee_notifications.45.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.45.o
	}
}

# The First Colonial Nation
country_event = {
	id = repartee.5
	title = repartee.5.t
	desc = repartee.5.d

	picture = RELIGION_eventPicture
	fire_only_once = yes

	trigger = {
		has_global_flag = repartee_begins_flag
		has_global_flag = repartee_natives_discovered_flag
		LAtE_repartee_contender_trigger = yes
		any_subject_country = {
			capital_scope = {
				LAtE_in_old_world_trigger = yes
			}
			is_colonial_nation = yes
		}
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = repartee.5.o
		repartee_increase_effect = yes
	}

	after = {
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = yes
			}
			country_event = {
				id = repartee_notifications.55
				days = 60 
			}
		}
		every_country = {
			limit = {
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = no
			}
			country_event = {
				id = repartee_notifications.56
				days = 60 
			}
		}
	}
}

# First Colonial Nation announcement - Same religion
country_event = {
	id = repartee_notifications.55
	title = repartee_notifications.55.t
	desc = repartee_notifications.55.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.55.o
	}
}

# First Colonial Nation announcement - Different religion
country_event = {
	id = repartee_notifications.56
	title = repartee_notifications.56.t
	desc = repartee_notifications.56.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.56.o
	}
}

# The Conquest of England
country_event = {
	id = repartee.6
	title = repartee.6.t
	desc = repartee.6.d

	picture = RELIGION_eventPicture
	fire_only_once = yes

	trigger = {
		has_global_flag = repartee_begins_flag
		has_global_flag = repartee_natives_discovered_flag
		LAtE_repartee_contender_trigger = yes
		british_isles_region = {
			type = all
			country_or_non_sovereign_subject_holds = root
		}
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = repartee.6.o
		repartee_increase_effect = yes
	}

	after = {
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = yes
			}
			country_event = {
				id = repartee_notifications.66
				days = 60 
			}
		}
		every_country = {
			limit = {
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = no
			}
			country_event = {
				id = repartee_notifications.67
				days = 60 
			}
		}
	}
}

# Conquest of England announcement - Same religion
country_event = {
	id = repartee_notifications.66
	title = repartee_notifications.66.t
	desc = repartee_notifications.66.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.66.o
	}
}

# Conquest of England announcement - Different religion
country_event = {
	id = repartee_notifications.67
	title = repartee_notifications.67.t
	desc = repartee_notifications.67.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.67.o
	}
}

# The Conquest of the Lowlands
country_event = {
	id = repartee.7
	title = repartee.7.t
	desc = repartee.7.d

	picture = RELIGION_eventPicture
	fire_only_once = yes

	trigger = {
		has_global_flag = repartee_begins_flag
		has_global_flag = repartee_natives_discovered_flag
		LAtE_repartee_contender_trigger = yes
		low_countries_region = {
			type = all
			country_or_non_sovereign_subject_holds = root
		}
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = repartee.7.o
		repartee_increase_effect = yes
	}

	after = {
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = yes
			}
			country_event = {
				id = repartee_notifications.77
				days = 60 
			}
		}
		every_country = {
			limit = {
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = no
			}
			country_event = {
				id = repartee_notifications.78
				days = 60 
			}
		}
	}
}

# Conquest of the Lowlands announcement - Same religion
country_event = {
	id = repartee_notifications.77
	title = repartee_notifications.77.t
	desc = repartee_notifications.77.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.77.o
	}
}

# Conquest of the Lowlands announcement - Different religion
country_event = {
	id = repartee_notifications.78
	title = repartee_notifications.78.t
	desc = repartee_notifications.78.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.78.o
	}
}

# This Should work, but it doesn't yet
# No Port Penalty - Loss
country_event = {
	id = repartee.8
	title = repartee.8.t
	desc = repartee.8.d
	picture = RELIGION_eventPicture


	trigger = {
		has_global_flag = repartee_begins_flag
		LAtE_repartee_contender_trigger = yes
		NOT = {
			any_country = {
				AND = {
					LAtE_repartee_contender_trigger = yes
					LAtE_same_repartee_group_trigger = yes
					any_owned_province = {
						has_port = yes
					}
				}

			}
		}
		NOT = {
			OR = {
				AND = {
					religion = catholic
					has_global_flag = repartee_catholic_no_port_flag
				}
				AND = {
					OR = {
						religion = anglican
						religion = ursuline
					}
					has_global_flag = repartee_canadian_no_port_flag
				}
				AND = {
					religion = protestant
					has_global_flag = repartee_protestant_no_port_flag
				}
				AND = {
					religion_group = oldworld
					has_global_flag = repartee_oldworld_no_port_flag
				}
				AND = {
					OR = {
						religion_group = afro_syncretic
						religion_group = cult_of_saints
					}
					has_global_flag = repartee_latin_no_port_flag
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 3
		modifier = {
			factor = 0.5
			ai = no
		}
	}

	immediate = {
		repartee_decrease_effect = yes
		if = {
			limit = { 
				religion = catholic
			}
			set_global_flag = repartee_catholic_no_port_flag
		}
		else_if = {
			limit = { 
				OR = {
					religion = anglican
					religion = ursuline
				}
			}
			set_global_flag = repartee_canadian_no_port_flag
		}
		else_if = {
			limit = { 
				religion = protestant
			}
			set_global_flag = repartee_protestant_no_port_flag
		}
		else_if = {
			limit = { 
				religion_group = oldworld
			}
			set_global_flag = repartee_oldworld_no_port_flag
		}
		else_if = {
			limit = { 
				OR = {
					religion_group = afro_syncretic
					religion_group = cult_of_saints
				}
			}
			set_global_flag = repartee_latin_no_port_flag
		}
	}


	option = {
		name = repartee.8.o
	}

	after = {
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = yes
			}
			country_event = {
				id = repartee_notifications.88
				days = 60 
			}
		}
	}
}

# No port announcement
country_event = {
	id = repartee_notifications.88
	title = repartee_notifications.88.t
	desc = repartee_notifications.88.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.88.o
	}
}

# No Port Penalty - Gain
country_event = {
	id = repartee.9
	title = repartee.9.t
	desc = repartee.9.d
	picture = RELIGION_eventPicture


	trigger = {
		has_global_flag = repartee_begins_flag
		LAtE_repartee_contender_trigger = yes
		any_country = {
			AND = {
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = yes
				any_owned_province = {
					has_port = yes
				}
			}
		}
		OR = {
			AND = {
				religion = catholic
				has_global_flag = repartee_catholic_no_port_flag
			}
			AND = {
				OR = {
					religion = anglican
					religion = ursuline
				}
				has_global_flag = repartee_canadian_no_port_flag
			}
			AND = {
				religion = protestant
				has_global_flag = repartee_protestant_no_port_flag
			}
			AND = {
				religion_group = oldworld
				has_global_flag = repartee_oldworld_no_port_flag
			}
			AND = {
				OR = {
					religion_group = afro_syncretic
					religion_group = cult_of_saints
				}
				has_global_flag = repartee_latin_no_port_flag
			}
		}
	}

	mean_time_to_happen = {
		months = 3
		modifier = {
			factor = 0.5
			ai = no
		}
	}

	immediate = {
		repartee_increase_effect = yes
		if = {
			limit = { 
				religion = catholic
			}
			clr_global_flag = repartee_catholic_no_port_flag
		}
		else_if = {
			limit = { 
				OR = {
					religion = anglican
					religion = ursuline
				}
			}
			clr_global_flag = repartee_canadian_no_port_flag
		}
		else_if = {
			limit = { 
				religion = protestant
			}
			clr_global_flag = repartee_protestant_no_port_flag
		}
		else_if = {
			limit = { 
				religion_group = oldworld
			}
			clr_global_flag = repartee_oldworld_no_port_flag
		}
		else_if = {
			limit = { 
				OR = {
					religion_group = afro_syncretic
					religion_group = cult_of_saints
				}
			}
			clr_global_flag = repartee_latin_no_port_flag
		}
	}

	option = {
		name = repartee.9.o
	}

	after = {
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				ai = no
				LAtE_repartee_contender_trigger = yes
				LAtE_same_repartee_group_trigger = yes
			}
			country_event = {
				id = repartee_notifications.99
				days = 60 
			}
		}
	}
}

# No port announcement
country_event = {
	id = repartee_notifications.99
	title = repartee_notifications.99.t
	desc = repartee_notifications.99.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = repartee_notifications.99.o
	}
}