namespace = anabaptists_estate_events

#Anabaptists Wish to become an estate
country_event = {
	id = anabaptists_estate_events.11
	title = anabaptists_estate_events.11.t # Anabaptists requests privileges
	desc = anabaptists_estate_events.11.d
	picture = CHURCH_ESTATE_1_eventPicture
	
	major = yes

    trigger = {
        NOT = { has_country_flag = anabaptists_accepted }
        NOT = { has_country_flag = anabaptists_rejected }
        NOT = { has_country_flag = anabaptists_expelled }
        religion_group = christian
        any_owned_province = {
            OR = {
                has_province_modifier = anabaptists_present_small
                has_province_modifier = anabaptists_present_medium
                has_province_modifier = anabaptists_present_large
                religion = anabaptist
            }
        }
    }

    mean_time_to_happen = {
        months = 3
    }
	
	option = {
		name = anabaptists_estate_events.11.a	
        set_country_flag = anabaptists_accepted
        ai_chance = { factor = 2 }
	}

	option = {
		name = anabaptists_estate_events.11.b	
        set_country_flag = anabaptists_rejected
        ai_chance = { factor = 2 }
	}
}

#Anabaptists growth in province
province_event = {
	id = anabaptists_estate_events.12
	title = anabaptists_estate_events.12.t # Anabaptists requests privileges
	desc = anabaptists_estate_events.12.d
	picture = CHURCH_ESTATE_1_eventPicture
	
    trigger = {
        NOT = { owner = { has_country_modifier = anabaptists_estate_events_growth_cooldown } }
        NOT = { has_province_modifier = anabaptists_present_large }
        OR = {
            owner = { has_estate_privilege = estate_anabaptists_allow_growth }
            has_province_modifier = anabaptists_present_medium
            has_province_modifier = anabaptists_present_small
        }
        NOT = { owner = { has_country_flag = anabaptists_expelled } }
        owner = { religion_group = christian }
    }

    mean_time_to_happen = {
        months = 240
        modifier =  {
            factor = 10
            NOT = { owner = { religion_group = christian } }
        }
        modifier = {
            factor = 0.95
            has_province_modifier = anabaptists_present_small
        }
        modifier = {
            factor = 0.9
            has_province_modifier = anabaptists_present_medium
        }
        modifier = {
            factor = 0.75
            religion = anabaptist
        }
        modifier = {
            factor = 0.75
            owner = {
                estate_influence = {
                    estate = anabaptists_estate_events
                    influence = 25
                }
            }
        }
        modifier = {
            factor = 0.75
            owner = {
                estate_influence = {
                    estate = anabaptists_estate_events
                    influence = 50
                }
            }
        }
        modifier = {
            factor = 0.75
            owner = {
                estate_influence = {
                    estate = anabaptists_estate_events
                    influence = 75
                }
            }
        }
    }

    immediate = {
        owner = {
            add_country_modifier = {
                name = anabaptists_estate_events_growth_cooldown
                duration = 365
                hidden = yes
            }
        }
    }
	
	option = {
		name = anabaptists_estate_events.12.a	
        if = {
            limit = { has_province_modifier = anabaptists_present_medium }
            hidden_effect = { remove_province_triggered_modifier = anabaptists_present_medium  }
            add_province_triggered_modifier = anabaptists_present_large
        }
        else_if = {
            limit = { has_province_modifier = anabaptists_present_small }
            hidden_effect = { remove_province_triggered_modifier = anabaptists_present_small  }
            add_province_triggered_modifier = anabaptists_present_medium
        }
        else = {
            add_province_triggered_modifier = anabaptists_present_small
        }
	}

	option = {
		name = anabaptists_estate_events.12.b	
        owner = {
            add_estate_loyalty_modifier = {
                estate = anabaptists_estate_events
                desc = EST_ANA_GROWTH
                loyalty = -10
                duration = 3650
            }
        }
	}
}

#Anabaptists conversion
province_event = {
	id = anabaptists_estate_events.13
	title = anabaptists_estate_events.13.t # Anabaptists requests privileges
	desc = anabaptists_estate_events.13.d
	picture = CHURCH_ESTATE_1_eventPicture
	
    trigger = {
        NOT = { owner = { has_country_modifier = anabaptists_estate_events_conversion_cooldown } }
        has_province_modifier = anabaptists_present_large
        owner = { has_estate_privilege = estate_anabaptists_allow_proselytization }
        is_capital = no
    }

    mean_time_to_happen = {
        months = 240
        modifier = {
            factor = 0.75
            owner = {
                estate_influence = {
                    estate = anabaptists_estate_events
                    influence = 25
                }
            }
        }
        modifier = {
            factor = 0.75
            owner = {
                estate_influence = {
                    estate = anabaptists_estate_events
                    influence = 50
                }
            }
        }
        modifier = {
            factor = 0.75
            owner = {
                estate_influence = {
                    estate = anabaptists_estate_events
                    influence = 75
                }
            }
        }
    }

    immediate = {
        owner = {
            add_country_modifier = {
                name = anabaptists_estate_events_conversion_cooldown
                duration = 365
                hidden = yes
            }
        }
    }
	
	option = {
		name = anabaptists_estate_events.13.a	
        change_religion = anabaptist
	}

	option = {
		name = anabaptists_estate_events.13.b	
        owner = {
            add_estate_loyalty_modifier = {
                estate = anabaptists_estate_events
                desc = EST_ANA_RELIGION
                loyalty = -10
                duration = 3650
            }
        }
	}
}

