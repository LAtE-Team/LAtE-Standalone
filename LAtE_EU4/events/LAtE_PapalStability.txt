##############################
# Papal Stability Events     #
#                            #
# Written by Technecian 	 #
##############################

namespace = papal_stability

#0-10 Opening and Control of Texas/Chicago

# country_event = {
# 	id = papal_stability.0
# 	title = papal_stability.0.t
# 	desc = papal_stability.0.d

# 	fire_only_once = yes
# 	hidden = yes

# 	trigger = {
# 		tag = PAP
# 	}

# 	immediate = {
# 		add_reform_desire = -2
# 	}

# 	option = {
# 		name = papal_stability.0.a
# 	}
# }

#Ordinate - Catholic Contact, Game Start event
country_event = {
	id = papal_stability.1
	title = papal_stability.1.t
	desc = {
		trigger = {
			tag = PAP
		}
		desc = papal_stability.1.pope.d
	}
	desc = {
		trigger = {
			NOT = { tag = PAP }
			religion = catholic
		}
		desc = papal_stability.1.catholic.d
	}
	desc = {
		trigger = {
			NOT = { tag = PAP }
			religion = ursuline
		}
		desc = papal_stability.1.ursuline.d
	}
	picture = RELIGION_eventPicture

	trigger = {
		LAtE_in_america_trigger = yes
		OR = {
			religion = catholic
			religion = ursuline
		}
		NOT = { has_country_flag = LAtE_PS_catholic_ordinate_contact_flag }
		NOT = { is_year = 3060 }
	}

	mean_time_to_happen = {
		months = 4
	}

	option = {
		name = papal_stability.1.pope.o
		trigger = {
			tag = PAP
		}
		add_reform_desire = 0.2
	}

	option = {
		name = papal_stability.1.catholic.o
		trigger = {
			NOT = { tag = PAP }
			religion = catholic
		}
	}

	option = {
		name = papal_stability.1.ordinate.o
		trigger = {
			NOT = { tag = PAP }
			religion = ursuline
		}
	}

	option = {
		name = papal_stability.1.backup
		trigger = {
			NOT = { tag = PAP }
			NOT = { religion = ursuline }
			NOT = { religion = catholic }
		}
	}

	after = {
		set_country_flag = LAtE_PS_catholic_ordinate_contact_flag
	}
}

#Loss of Chicago
country_event = {
	id = papal_stability.2
	title = papal_stability.2.t
	desc = papal_stability.2.d
	picture = RELIGION_eventPicture

	trigger = {
		tag = PAP
		NOT = { has_global_flag = LAtE_PS_catholic_lost_control_of_chicago_flag }
		4563 = {
			NOT = { religion = catholic }
			owner = {
				NOT = { religion = catholic }
			}
		}
	}

	option = {
		name = papal_stability.2.a
		add_reform_desire = 0.1
	}

	after = {
		set_global_flag = LAtE_PS_catholic_lost_control_of_chicago_flag
		every_known_country = {
			limit = {
				religion = catholic
			}
			country_event = {
				id = papal_stability.4
				days = 4
			}
		}
		4563 = {
			owner = {
				country_event = {
					id = papal_stability.4
					days = 4
				}				
			}
		}
	}
}

#Chicago regained
country_event = {
	id = papal_stability.3
	title = papal_stability.3.t
	desc = papal_stability.3.d
	picture = RELIGION_eventPicture

	trigger = {
		tag = PAP
		has_global_flag = LAtE_PS_catholic_lost_control_of_chicago_flag
		4563 = {
			religion = catholic
			owner = {
				religion = catholic
			}
		}
	}

	option = {
		name = papal_stability.3.a
		add_reform_desire = -0.1
	}

	after = {
		clr_global_flag = LAtE_PS_catholic_lost_control_of_chicago_flag
		every_known_country = {
			limit = {
				religion = catholic
			}
			country_event = {
				id = papal_stability.4
				days = 4
			}
		}
	}
}

#Chicago Announcement
country_event = {
	id = papal_stability.4
	title = papal_stability.4.t
	desc = {
		trigger = {
			religion = catholic
			has_global_flag = LAtE_PS_catholic_lost_control_of_chicago_flag
		}
		desc = papal_stability.4.catholic.d
	}
	desc = {
		trigger = {
			NOT = { religion = catholic }
			has_global_flag = LAtE_PS_catholic_lost_control_of_chicago_flag
		}
		desc = papal_stability.4.enemy.d
	}
	desc = {
		trigger = {
			NOT = { has_global_flag = LAtE_PS_catholic_lost_control_of_chicago_flag }
		}
		desc = papal_stability.4.regained.d
	}
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = papal_stability.4.catholic.o
		trigger = {
			religion = catholic
			has_global_flag = LAtE_PS_catholic_lost_control_of_chicago_flag
		}
	}

	option = {
		name = papal_stability.4.enemy.o
		trigger = {
			NOT = { religion = catholic }
			has_global_flag = LAtE_PS_catholic_lost_control_of_chicago_flag
		}
	}

	option = {
		name = papal_stability.4.regained.o
		trigger = {
			NOT = { has_global_flag = LAtE_PS_catholic_lost_control_of_chicago_flag }
		}
	}
}

#Loss of Texas
country_event = {
	id = papal_stability.5
	title = papal_stability.5.t
	desc = papal_stability.5.d
	picture = RELIGION_eventPicture

	trigger = {
		tag = PAP
		NOT = { has_global_flag = LAtE_PS_catholic_lost_control_of_texas_flag }
		texas_region = {
			type = all
			NOT = { religion = catholic }
			owner = {
				NOT = { religion = catholic }
			}
		}
	}

	option = {
		name = papal_stability.5.a
		add_reform_desire = 0.2
	}

	after = {
		set_global_flag = LAtE_PS_catholic_lost_control_of_texas_flag
		every_known_country = {
			limit = {
				religion = catholic
			}
			country_event = {
				id = papal_stability.4
				days = 4
			}
		}
		every_known_country = {
			limit = {
				capital_scope = {
					region = texas_region
				}
			}
			country_event = {
				id = papal_stability.7
				days = 4
			}
		}
	}
}

#Texas regained
country_event = {
	id = papal_stability.6
	title = papal_stability.6.t
	desc = papal_stability.6.d
	picture = RELIGION_eventPicture

	trigger = {
		tag = PAP
		has_global_flag = LAtE_PS_catholic_lost_control_of_texas_flag
		texas_region = {
			type = all
			religion = catholic
			owner = {
				religion = catholic
			}
		}
	}

	option = {
		name = papal_stability.6.a
		add_reform_desire = -0.2
	}

	after = {
		clr_global_flag = LAtE_PS_catholic_lost_control_of_texas_flag
		every_known_country = {
			limit = {
				religion = catholic
			}
			country_event = {
				id = papal_stability.7
				days = 4
			}
		}
	}
}

#Texas Announcement
country_event = {
	id = papal_stability.7
	title = papal_stability.7.t
	desc = {
		trigger = {
			religion = catholic
			has_global_flag = LAtE_PS_catholic_lost_control_of_texas_flag
		}
		desc = papal_stability.7.catholic.d
	}
	desc = {
		trigger = {
			NOT = { religion = catholic }
			has_global_flag = LAtE_PS_catholic_lost_control_of_texas_flag
		}
		desc = papal_stability.7.enemy.d
	}
	desc = {
		trigger = {
			NOT = { has_global_flag = LAtE_PS_catholic_lost_control_of_texas_flag }
		}
		desc = papal_stability.7.regained.d
	}
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = papal_stability.7.catholic.o
		trigger = {
			religion = catholic
			has_global_flag = LAtE_PS_catholic_lost_control_of_texas_flag
		}
	}

	option = {
		name = papal_stability.7.enemy.o
		trigger = {
			NOT = { religion = catholic }
			has_global_flag = LAtE_PS_catholic_lost_control_of_texas_flag
		}
	}

	option = {
		name = papal_stability.7.regained.o
		trigger = {
			NOT = { has_global_flag = LAtE_PS_catholic_lost_control_of_texas_flag }
		}
	}
}

#Loss of St Louis - Papacy Ended:
country_event = {
	id = papal_stability.8
	title = papal_stability.8.t
	desc = papal_stability.8.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = papal_stability.8.a
		PAP = { set_papacy_active = no }
		add_reform_desire = 10
	}

	after = {
		every_known_country = {
			limit = {
				religion = catholic
			}
			country_event = {
				id = papal_stability.9
				days = 4
			}
		}
	}
}

#Papacy ended announcement
country_event = {
	id = papal_stability.9
	title = papal_stability.9.t
	desc = papal_stability.9.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = papal_stability.9.a
	}
}

#Discovery of the Old World
country_event = {
	id = papal_stability.10
	title = papal_stability.10.t
	desc = papal_stability.10.d
	picture = RELIGION_eventPicture

	fire_only_once = yes

	trigger = {
		religion = catholic
		LAtE_in_america_trigger = yes
		europe_superregion = {
			has_discovered = ROOT
		}
	}

	mean_time_to_happen = {
		days = 10
	}

	immediate = {
		set_global_flag = LAtE_PS_catholic_discovered_old_world_flag
	}

	option = {
		name = papal_stability.10.a
	}

	after = {
		every_known_country = {
			limit = {
				religion = catholic
			}
			country_event = {
				id = papal_stability.11
				days = 4
			}
		}
	}
}

#Discovery of the Old World announcement
country_event = {
	id = papal_stability.11
	title = papal_stability.11.t
	desc = papal_stability.11.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = papal_stability.11.a
	}
}

#Neoroman Breaks Out
province_event = {
	id = papal_stability.12
	title = papal_stability.12.t
	desc = papal_stability.13.t
	picture = RELIGION_eventPicture

	trigger = {
		religion = catholic
		has_global_flag = LAtE_PS_catholic_discovered_old_world_flag
		owner = {
			religion = catholic
			NOT = { tag = PAP }
		}
		OR ={
			continent = north_america
			continent = europe
		}
		OR = {
			AND = {
				reform_desire = 0.70
				NOT = { has_global_flag = LAtE_PS_neoroman_enabled_flag }
			}
			AND = {
				reform_desire = 0.85
				has_global_flag = LAtE_PS_neoroman_enabled_flag
				NOT = { has_global_flag = LAtE_PS_neoroman_expanded_flag }
			}
		}
	}

	mean_time_to_happen = {
		months = 2
		modifier = {
			factor = 0.5
			continent = north_america
		}
	}

	immediate = {
		add_reform_center = sedevacanist
		change_religion = sedevacanist
		if = {
			limit = {
				NOT = { has_global_flag = LAtE_PS_neoroman_enabled_flag }
			}
			set_global_flag = LAtE_PS_neoroman_enabled_flag
		}
		else_if = {
			limit = { 
				NOT = { has_global_flag = LAtE_PS_neoroman_expanded_flag }
			}
			set_global_flag = LAtE_PS_neoroman_expanded_flag
		}
	}

	option = {
		name = papal_stability.12.a
	}

	option = {
		name = papal_stability.12.b
		owner = {
			change_religion = sedevacanist
		}
	}

	after = {
		owner = {
			every_known_country = {
				limit = {
					religion = catholic
				}
				country_event = {
					id = papal_stability.13
					days = 4
				}
			}			
		}
	}
}

#Neoroman Notifier
country_event = {
	id = papal_stability.13
	title = papal_stability.13.t
	desc = papal_stability.13.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = papal_stability.13.a
	}
}

# The Discovery of Rome
country_event = {
	id = papal_stability.14
	title = papal_stability.14.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = papal_stability.14.catholic.d
	}
	desc = {
		trigger = {
			NOT = { religion = catholic }
			religion_group = christian
		}
		desc = papal_stability.14.christian.d
	}
	desc = {
		trigger = {
			NOT = { religion_group = christian }
		}
		desc = papal_stability.14.heathen.d
	}
	picture = RELIGION_eventPicture
	fire_only_once = yes

	trigger = {
		has_global_flag = LAtE_PS_catholic_discovered_old_world_flag
		LAtE_in_america_trigger = yes
		has_discovered = 118 #Rome
	}

	mean_time_to_happen = {
		months = 3
		modifier = {
			factor = 0.5
			religion = catholic
		}
	}

	option = {
		name = papal_stability.14.catholic.o
		trigger = {
			religion = catholic
		}
		add_reform_desire = -0.05
	}

	option = {
		name = papal_stability.14.christian.o
		trigger = {
			NOT = { religion = catholic }
			religion_group = christian
		}
		add_reform_desire = 0.05
	}

	option = {
		name = papal_stability.14.heathen.o
		trigger = {
			NOT = { religion_group = christian }
		}
		add_reform_desire = 0.1
	}

	after = {
		every_known_country = {
			limit = {
				religion = catholic
			}
			country_event = {
				id = papal_stability.15
				days = 4
			}
		}			
	}
}

#Roman Discovery Notifier
country_event = {
	id = papal_stability.15
	title = papal_stability.15.t
	desc = {
		trigger = {
			FROM = {
				religion = catholic
			}
		}
		desc = papal_stability.15.catholic.d
	}
	desc = {
		trigger = {
			FROM = {
				NOT = { religion = catholic }
				religion_group = christian
			}	
		}
		desc = papal_stability.15.christian.d
	}
	desc = {
		trigger = {
			FROM = {
				NOT = { religion_group = christian }
			}
		}
		desc = papal_stability.15.heathen.d
	}
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = papal_stability.15.a
	}
}

#Ownership of Rome
country_event = {
	id = papal_stability.16
	title = papal_stability.16.t
	desc = {
		trigger = {
			religion = catholic
		}
		desc = papal_stability.16.catholic.d
	}
	desc = {
		trigger = {
			NOT = { religion = catholic }
			religion_group = christian
		}
		desc = papal_stability.16.christian.d
	}
	desc = {
		trigger = {
			NOT = { religion_group = christian }
		}
		desc = papal_stability.16.heathen.d
	}
	picture = RELIGION_eventPicture

	trigger = {
		has_global_flag = LAtE_PS_catholic_discovered_old_world_flag
		LAtE_in_america_trigger = yes
		owns_or_non_sovereign_subject_of = 118
		118 = {
			religion = root
		}
		is_vassal = no
		OR = {
			AND = {
				religion = catholic
				NOT = { has_global_flag = LAtE_PS_catholic_owns_rome }
			}
			AND = {
				NOT = { religion = catholic }
				religion_group = christian
				NOT = { has_global_flag = LAtE_PS_christian_owns_rome }
			}
			AND = {
				NOT = { religion_group = christian }
				NOT = { has_global_flag = LAtE_PS_heathen_owns_rome }
			}
		}
	}

	mean_time_to_happen = {
		days = 4
	}

	immediate = {
		if = {
			limit = {
				religion = catholic
			}
			set_global_flag = LAtE_PS_catholic_owns_rome
			clr_global_flag = LAtE_PS_christian_owns_rome
			clr_global_flag = LAtE_PS_heathen_owns_rome
		}
		if = {
			limit = {
				NOT = { religion = catholic }
				religion_group = christian
			}
			clr_global_flag = LAtE_PS_catholic_owns_rome
			set_global_flag = LAtE_PS_christian_owns_rome
			clr_global_flag = LAtE_PS_heathen_owns_rome
		}
		if = {
			limit = {
				NOT = { religion_group = christian }
			}
			clr_global_flag = LAtE_PS_catholic_owns_rome
			clr_global_flag = LAtE_PS_christian_owns_rome
			set_global_flag = LAtE_PS_heathen_owns_rome
		}
	}

	option = {
		name = papal_stability.16.catholic.d
		trigger = {
			religion = catholic
		}
		add_reform_desire = -0.1
	}

	option = {
		name = papal_stability.16.christian.d
		trigger = {
			NOT = { religion = catholic }
			religion_group = christian
		}
		add_reform_desire = 0.1
	}

	option = {
		name = papal_stability.16.heathen.d
		trigger = {
			NOT = { religion_group = christian }
		}
		add_reform_desire = 0.2
	}

	after = {
		every_known_country = {
			limit = {
				religion = catholic
			}
			country_event = {
				id = papal_stability.17
				days = 4
			}
		}			
	}
}

#Roman Ownership Notifier
country_event = {
	id = papal_stability.17
	title = papal_stability.17.t
	desc = {
		trigger = {
			FROM = {
				religion = catholic
			}
		}
		desc = papal_stability.17.catholic.d
	}
	desc = {
		trigger = {
			FROM = {
				NOT = { religion = catholic }
				religion_group = christian
			}	
		}
		desc = papal_stability.17.christian.d
	}
	desc = {
		trigger = {
			FROM = {
				NOT = { religion_group = christian }
			}
		}
		desc = papal_stability.17.heathen.d
	}
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = papal_stability.17.a
	}
}

#The evil green witch!
country_event = {
	id = papal_stability.18
	title = papal_stability.18.t
	desc = papal_stability.18.d
	picture = RELIGION_eventPicture

	trigger = {
		has_global_flag = LAtE_PS_catholic_discovered_old_world_flag
		LAtE_in_america_trigger = yes
		tag = PAP
	}

	mean_time_to_happen = {
		years = 12
	}

	option = {
		name = papal_stability.18.a
		add_reform_desire = 0.1
	}

	after = {
		every_known_country = {
			limit = {
				religion = catholic
			}
			country_event = {
				id = papal_stability.19
				days = 4
			}
		}
	}
}

#Green Witch Notifier
country_event = {
	id = papal_stability.19
	title = papal_stability.19.t
	desc = papal_stability.19.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = papal_stability.19.a
	}
}